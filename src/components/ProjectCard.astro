---
import { Github, ExternalLink, Box, Layers, Archive } from 'lucide-react';

interface Props {
  title: string;
  description: string;
  tags: string[];
  status: 'dev' | 'stable' | 'archived';
  github?: string;
  demo?: string;
}

const { title, description, tags, status, github, demo } = Astro.props;

// 状态样式映射 (把样式逻辑封装在组件内部)
const statusConfig = {
    dev: { color: "text-yellow-400", border: "border-yellow-400/30", bg: "bg-yellow-400/10", icon: Box },
    stable: { color: "text-accent", border: "border-accent/30", bg: "bg-accent/10", icon: Layers },
    archived: { color: "text-gray-400", border: "border-gray-400/30", bg: "bg-gray-400/10", icon: Archive }
};

const currentStatus = statusConfig[status];
const StatusIcon = currentStatus.icon;
---

<article class="group relative flex flex-col h-full bg-black/40 border border-white/10 overflow-hidden hover:border-accent/50 transition-all duration-300">
    
    <div class="absolute inset-0 bg-gradient-to-br from-accent/0 to-accent/0 group-hover:from-accent/5 group-hover:to-transparent transition-all duration-500 pointer-events-none"></div>
    
    <div class="absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>

    <div class="p-8 flex flex-col h-full relative z-10">
        
        <div class="flex justify-between items-start mb-4">
            <h3 class="text-2xl font-serif font-bold text-white group-hover:text-accent transition-colors tracking-tight">
                {title}
            </h3>
            
            <div class={`flex items-center gap-1.5 px-2 py-1 border rounded-sm ${currentStatus.border} ${currentStatus.bg}`}>
                <StatusIcon class={`w-3 h-3 ${currentStatus.color}`} />
                <span class={`font-mono text-[9px] uppercase tracking-wider ${currentStatus.color}`}>
                    {status}
                </span>
            </div>
        </div>

        <p class="text-gray-400 font-sans text-sm leading-relaxed mb-8 flex-grow opacity-80 group-hover:opacity-100 transition-opacity">
            {description}
        </p>

        <div class="mt-auto space-y-6">
            
            <div class="flex flex-wrap gap-2">
                {tags.map(tag => (
                    <span class="text-[10px] font-mono text-gray-500 border border-white/10 px-1.5 py-0.5 group-hover:text-accent group-hover:border-accent/30 transition-colors">
                        #{tag}
                    </span>
                ))}
            </div>

            <div class="h-px w-full bg-white/5"></div>

            <div class="flex items-center gap-4">
                {github && (
                    <a href={github} target="_blank" class="flex items-center gap-2 text-xs font-mono text-white hover:text-accent transition-colors z-20">
                        <Github class="w-4 h-4" />
                        <span class="border-b border-transparent hover:border-accent">SOURCE_CODE</span>
                    </a>
                )}
                
                {demo && (
                    <a href={demo} target="_blank" class="flex items-center gap-2 text-xs font-mono text-white hover:text-accent transition-colors z-20">
                        <ExternalLink class="w-4 h-4" />
                        <span class="border-b border-transparent hover:border-accent">LIVE_DEMO</span>
                    </a>
                )}

                {/* 如果没有链接，显示占位符 */}
                {!github && !demo && (
                    <span class="text-[10px] font-mono text-gray-600 cursor-not-allowed">
                        // PRIVATE_REPO
                    </span>
                )}
            </div>
        </div>
    </div>
</article>