---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

// 1. 生成所有文章的静态路径 (必须步骤)
export async function getStaticPaths() {
	const posts = await getCollection('notes');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

// 2. 获取当前文章内容
const post = Astro.props;
const { Content } = await post.render();
---

<BaseLayout title={post.data.title}>
    <article class="max-w-3xl mx-auto mt-8">
        <header class="mb-12 border-b border-white/10 pb-8">
            <div class="font-mono text-xs text-acid-green mb-4">
                // {post.data.tags?.join(' // ')}
            </div>
            <h1 class="text-4xl md:text-5xl font-serif font-bold mb-6 leading-tight">
                {post.data.title}
            </h1>
            <div class="font-mono text-gray-500 text-sm">
                PUB_DATE: {post.data.pubDate.toLocaleDateString()}
            </div>
        </header>

        <div class="prose prose-invert prose-lg max-w-none
                    prose-headings:font-serif prose-headings:font-bold
                    prose-p:text-gray-300 prose-p:leading-relaxed
                    prose-code:text-acid-green prose-code:bg-white/10 prose-code:px-1 prose-code:rounded-sm prose-code:before:content-none prose-code:after:content-none">
            <Content />
        </div>
    </article>
</BaseLayout>